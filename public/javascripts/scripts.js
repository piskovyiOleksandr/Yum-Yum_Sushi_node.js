$(function(){function t(){var t=[];$(".summary > tbody > tr").each(function(a,e){var r={name:$(this).find(".name").text(),price:$(this).find(".price").text()};t.push(r)});var a=JSON.stringify(t);localStorage.setItem("cartItems",a)}function a(a){a.remove(),r(),t(),0===$(".summary > tbody > tr").length&&($(".cart").addClass("empty"),$(".cart a").css("display","none"))}function e(a){$(".cart").removeClass("empty"),$(".summary > tbody").append("<tr><td class='name'>"+a.name+"</td><td class='price'>"+a.price+"</td><td class='del'><button type='button'>X</button></td</tr>"),$(".cart a").css("display","block"),r(),t()}function r(){var t=0;$(".summary > tbody > tr").each(function(a,e){var r=$(e).find(".price").text();t+=+r}),$(".summary .sum").text(t+" грн.")}for(var n=localStorage.getItem("cartItems"),o=JSON.parse(n)||[],s=0;s<o.length;s++)e(o[s]);$(".list").on("click",".buy",function(t){var a=$(t.target).closest(".box");e({id:a.attr("id"),name:a.find(".name").text(),price:a.find(".price-value").text()})}),$(".summary").click(function(t){var e=$(t.target);if(e.is(".del > button")){a(e.closest("tr"))}}),$(".btn-order").on("click",function(t){t.preventDefault();var a={surname:$("#surname").val(),name:$("#name").val(),street:$("#street").val(),body:$(".summary > tbody > tr > td.name").text()};console.log(a),$.ajax({type:"POST",data:JSON.stringify(a),contentType:"application/json",url:"/cart/order"}).done(function(t){t.ok?(alert("good"),$(location).attr("href","/")):alert("Error")})})}),$(function(){$(".order").on("click",function(t){t.preventDefault();var a={surname:$("#surname").val(),name:$("#name").val(),street:$("#street").val(),numb:$("#numb").val(),apartment:$("#apartment").val(),nameOrder:$(".summary .name").text(),sumOder:$(".summary .sum").text()};$.ajax({type:"POST",data:JSON.stringify(a),contentType:"application/json",url:"/cart/order"}).done(function(t){t.ok?$(".success").css("display","block"):$(".top").after('<p class="error"> Заповніть всі поля </p>')})})});